---
title: A guide on commit messages
date: 2020-01-29
---

The time you had an archive on your disk called "version 1" should be far away. I bet you use some tool for version control like GitHub, Gitlab, Bitbucket, ... So you must write commits everytime you want to add your code to a project. Did you ever ask yourself if your commits messages are good? Maybe you don't like writing them and wonder why you have to write it every time you want to push code. After all the change must be sufficient enough? 

In this article, we will talk about writing good commit messages not good commits even if these two subjects are closely linked (here is a [good article](https://www.git-tower.com/blog/version-control-best-practices/) from Tobias Günther that summarize well best practices about version control).

## Why commit message are important

So, is the change sufficient? Obviously, the answer is no. But why?

Commit messages have a lot of usages. This is the first way to communicate with your fellow developers on a project. The change is the "What" the commit message is the "Why". It must give enough context to a developper that might ask himself why some code is written like that. When a commit message gives you enough context about the change you won't spend precious time asking yourself the reason a developer push this code. In some case like open source projects busy maintainers won't even read your code if you don't give them a minimum of information like a nicely written commit message.

Commit messages are not only for your coworkers but also for your future self as Peter Hutterer said in this great article [On commit messages](http://who-t.blogspot.com/2009/12/on-commit-messages.html).

> Any software project is a collaborative project. It has at least two developers, the original developer and the original developer a few weeks or months later when the train of thought has long left the station.
>
> Peter Hutterer - [On commit messages](http://who-t.blogspot.com/2009/12/on-commit-messages.html)

A project is made to be maintained in the long term. Sometimes years after a piece of code has been written you will ask yourself why it has been written like that. It happened to me this week on function I have written only 6 months ago. With a well written commit message it is easier to get back in the state of mind at the time you wrote this change.

Taking care of your commit messages can also simplify your daily life. Some tools becomes more interesting with a meaningful commit history like a few git commands `log`, `rebase`, `cherry-pick`, ... When you come back from holidays a simple `git log --pretty` will give you a lot of information about what your coworkers did while you was away. Writing good commit messages force you to split your change making it easier to review with `git log -p`.

Speaking of review did you ever struggle rebasing your code on some change a developer made? It becomes easier to know why a change was made if the commit message carries real meaning. It makes `rebase` result much more predictible. Another example is `git blame` command which by the way is not made to make fun of your colleagues but giving you context on a line of code you come accross. It can be pretty useful when you want to refactor a piece of code. 

Last but not least, a well structured commit history enables generating a changelog between two version of your project to inform your users what changed.

This is a huge amount of reasons to start taking time to write good commit messages.

## How to write a good commit message

Now that you are convinced commit messages are important. Let's talk about how to write good ones. I picked commit messages from a project I work on called [immutadot](https://github.com/zenika-open-source/immutadot). As you can see these commit messages are not consistent. It makes them hard to read.

```
fix #72 unnecessary object copies
Fixing unshift documentation examples
seq.chain path parameter fix #18
Remove built files
Add tests
Add Circle CI base config
Rename es -> src
Add lang package with toggle, fix exports
Core package
```

In these commit message we can see a few mistakes in term of style, content and metadata. Chris beams describe well these three points in his article [How to Write a Git Commit Message](https://chris.beams.io/posts/git-commit/).

> Style. Markup syntax, wrap margins, grammar, capitalization, punctuation. Spell these things out, remove the guesswork, and make it all as simple as possible. The end result will be a remarkably consistent log that’s not only a pleasure to read but that actually does get read on a regular basis.
> 
> Content. What kind of information should the body of the commit message (if any) contain? What should it not contain?
> 
> Metadata. How should issue tracking IDs, pull request numbers, etc. be referenced?
> 
> Chris Beams - [How to Write a Git Commit Message](https://chris.beams.io/posts/git-commit/)

We can see sometimes a captialize message. There are metadata for only two commits. Finally some message's content are so light we can't figure out what the commit does. In the same article Chris goes through 7 rules to write a good commit message.

> 1. Separate subject from body with a blank line
> 2. Limit the subject line to 50 characters
> 3. Capitalize the subject line
> 4. Do not end the subject line with a period
> 5. Use the imperative mood in the subject line
> 6. Wrap the body at 72 characters
> 7. Use the body to explain what and why vs. how
>
> Chris Beams - [How to Write a Git Commit Message](https://chris.beams.io/posts/git-commit/)

I personnally apply a subset of these rules:

- Limit the subject line to 50 characters
- Capitalize the subject line
- Use the imperative mood in the subject line

The characters limit does not only force you to be concise which is a great skill but also fits well with a lot of tools as explained in Tim Pope article [A Note About Git Commit Messages](https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html).

I tend to think the perfect is the enemy of the good. That is why I omitted talking about commit's body. I think we have enough work to do on summary line. But I would add one rule as counterpart:

- Add a pull request/merge request tracking ID

Most of the time, we use tools to discuss during a code review process like GitHub, Gitlab, ... All pieces of information about the change will be at least described there. I added this rule about tracking ID so it becomes easy to find related pull/merge request. Writing a commit body is better than adding tracking IDs because if you change your repository manager solution you will loose all this precious context information and your tracking IDs will be useless.

Here is a more recent example from a project I work on called [gitmoji-changelog](https://github.com/frinyvonnick/gitmoji-changelog) that follow these rules:

```
Make core independent from the git client (#171)
Upgrade Docker image version (#167)
Add maven preset (#172)
Add a generic preset using configuration file (#160)
Improve error messages for preset system (#161)
Publish Canary version on master push (#141)
```

Having a consistent style makes it much more easier to read. You can figure out the context of the change and metadata are directly accessible. The most important thing is to find common rules in your team to ensure having a well structured commit history. There are some conventions that can help you finding these but we will come back to this subject later.

If you have difficulties to find out what message you should write maybe you should split your commit in smaller parts. Peter Hutterer listed in his article [On commit messages](http://who-t.blogspot.com/2009/12/on-commit-messages.html) a few examples where it is difficult to find out a good commit message because your commit patch may not be logical.

### Bonus

If you use practises like pair or mob programming don't forget to add your coworkers names in your commit messages:

```
$ git commit -m "Refactor usability tests.
>
>
Co-authored-by: name <name@example.com>
Co-authored-by: another-name <another-name@example.com>"
```

## Commit conventions

There are a few conventions that comes with tools to facilitate your daily life. CLIs to create commits message and changelogs. There are well documented so you don't have to write documentation about your own commit message convention.

### conventionnal commits
- Monorepo

### gitmoji
- Visual
